<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <script src="products.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>CW1 IW</title>
</head>
<body>
    <div>
        <h1>CW1 - Individual Work</h1>
    </div>
    
    <!-- the canvas -->
    <div class="container">
        <div class="groupWork" id="groupWork">
            <div v-for="product in products" id="prod">

                <ul>
                    <ol>Subject: {{product.subject}}</ol> 
                    <ol>Location: {{product.location}}</ol>
                    <ol>Price: {{product.price}}</ol> 
                    <ol>Spaces: {{product.space}}</ol> 
                    <ol><img v-bind:src="product.image"></ol>
                </ul>
            
            
            <!-- add to cart button -->
            <button v-on:click="changeFunction" v-if="canAddToCart(product)">Add to Cart</button> 
            <!-- disable button if all the items are added to the cart -->
            <div v-else>
                <button disabled>Add to Cart</button>
            </div>
            </div>
        </div>
        <div id="sorting">
            <button id="Ascending">Ascending</button>
            <button id="Descending">Descending</button>
        </div>
        <div id="Checkout">
            <h1>Checkout</h1>
            <p>
                <strong>Name: </strong>
                <input v-model="order.Firstname"/>
            </p>
            <p>
                <strong>Surname: </strong>
                <input v-model="order.Lastname"/>
            </p>
            <h3>Order Confirmation</h3>
            <p>Name: {{order.name}}</p>
            <p>Surname: {{order.surname}}</p>
        </div>
    </div>
</div>
    
    <!-- The Script -->
    <script>
    let afterSchoolClub = new Vue({
        el:'.container', 
        data:{ 
            sitename: "CW1 Vue App",
        products: products,
        cart:[],
        order: {
            Firstname: "",
            Lastname: ""
        },
    },
    methods: {
            addItemToCart: function() {
                this.cart.push(this.product.id);
            },
            changeValue: function () {
                if (this.product.space > 0) {
                    this.product.space -= 1;
                }
            },
            changeFunction: function () {
                this.addItemToCart ();
                this.changeValue ();
            },
            canAddToCart(product) {
                return product.space > this.totalItemsInTheCart;
            },
        },
        computed: {
            totalItemsInTheCart: function() {
                return this.cart.length || "";
            },
            ItemsLeft() {
                return this.product.space - this.totalItemsInTheCart;
    }
        }
    })
    </script>
</body>
</html>